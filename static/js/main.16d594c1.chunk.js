(this.webpackJsonpcv=this.webpackJsonpcv||[]).push([[0],{105:function(e,t,n){},106:function(e,t,n){},107:function(e,t,n){},108:function(e,t,n){},109:function(e,t,n){},117:function(e,t,n){},118:function(e,t,n){},163:function(e,t,n){},166:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),o=n(91),a=n.n(o),i=(n(105),n(106),n(107),n(12)),s=n(3),u=n(14),l=n(169);n(108);function d(){var e=Object(r.useState)(window.innerWidth),t=Object(s.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){var e=function(){return c(window.innerWidth)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}})),n}function f(){return d()<600}function h(){var e=Object(r.useState)(window.innerHeight),t=Object(s.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){var e=function(){return c(window.innerHeight)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}})),n}n(109);var b=n(1),p=function(e){var t=Object(r.useRef)(null),n=d(),c=h(),o=Object(r.useState)({matrix:[],drops:[]}),a=Object(s.a)(o,2),i=a[0],u=a[1];return Object(r.useEffect)((function(){var n=t&&t.current;if(n){var r=function(e,t){var n=e.getContext("2d");if(null==n)return{matrix:[],drops:[]};var r="\u30ac\u30ce\u30f3\u306e\u5f62\u614b\u306b\u3088\u3063\u3066\u30b9\u30c6\u30c3\u30d7\u3092\u5206\u3051\u305f\u65b9\u304c\u3044\u3044\u304b\u3082".split(""),c=e.width/t.fontSize,o=e.height/t.fontSize,a=[];n.fillStyle="rgba(".concat(t.textColor,", 0.04)"),n.font=t.fontSize+"px arial";for(var i=0;i<c;i++){a[i]=o;for(var s=0;s<o;s++){var u=r[Math.floor(Math.random()*r.length)];n.fillText(u,i*t.fontSize,s*t.fontSize)}}return{matrix:r,drops:a}}(n,e);u(r)}}),[e]),function(e,t){var n=Object(r.useRef)(e);Object(r.useEffect)((function(){n.current=e}),[e]),Object(r.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){var n=t&&t.current;if(n){var r=function(e,t,n){var r=e.getContext("2d");if(null==r)return{matrix:[],drops:[]};r.fillStyle="rgba(".concat(t.backgroundColor,", 0.04)"),r.fillRect(0,0,e.width,e.height),r.fillStyle="rgba(".concat(t.textColor,", 1)"),r.font=t.fontSize+"px arial";for(var c=0;c<n.drops.length;c++){var o=n.matrix[Math.floor(Math.random()*n.matrix.length)];r.fillText(o,c*t.fontSize,n.drops[c]*t.fontSize),n.drops[c]*t.fontSize>e.height&&Math.random()>.975&&(n.drops[c]=0),n.drops[c]++}return n}(n,e,i);u(r)}}),35),Object(b.jsx)("canvas",{ref:t,id:"matrix",width:n,height:c})},v=n(4),m=n.n(v),g=n(16),j=n(92),w=n(36),x=function(e,t){try{return w.a.decrypt(e,t).toString(w.b.Utf8)}catch(n){return""}},O=function e(){var t=this;Object(j.a)(this,e),this.exitCallbacks={},this.commandHistory=[],this.encrypted=["experience","skills","profile","picture","languages"],this.fetchAndDecrypt=function(){var e=Object(g.a)(m.a.mark((function e(n,r,c){var o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetch(n,r);case 2:if(!(o=e.sent).startsWith("encrypted:")){e.next=5;break}return e.abrupt("return",x(o.replace("encrypted:",""),c)||"Unauthorized");case 5:return e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),this.fetch=function(e,t){var n="./c_".concat(e,t?"_small.html":".html");return fetch(n).then((function(t){return t.status<300?t.text():"".concat(e,": command not found<br/>")}))},this.handleLogin=function(){var e=Object(g.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n&&n.length>0)){e.next=8;break}return e.next=3,t.fetchAndDecrypt("check",!1,n[0]);case 3:if("OK"!==e.sent){e.next=7;break}return sessionStorage.setItem("aesKey",btoa(n[0])),e.abrupt("return","Login successful");case 7:return e.abrupt("return","Unauthorized");case 8:return e.abrupt("return","Usage: login [decrytionKey]");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.handleLogout=function(e){return sessionStorage.removeItem("aesKey"),"You are now logged out"},this.handleExit=function(e){var n=t.exitCallbacks[e];return n&&n(e),"session closed"},this.registerExit=function(e,n){t.exitCallbacks[e]=n},this.unregisterExit=function(e){delete t.exitCallbacks[e]},this.execute=function(){var e=Object(g.a)(m.a.mark((function e(n,r,c,o,a){var i,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=atob(sessionStorage.getItem("aesKey")||""),s=""!==r.trim(),o&&s&&t.commandHistory.push(r),e.t0=!0,e.next=e.t0===("login"===r)?6:e.t0===("logout"===r)?7:e.t0===("exit"===r)?8:9;break;case 6:return e.abrupt("return",t.handleLogin(a));case 7:return e.abrupt("return",t.handleLogout(a));case 8:return e.abrupt("return",c?Promise.resolve(""):t.handleExit(n));case 9:return e.abrupt("return",t.fetchAndDecrypt(r,c,i));case 10:case"end":return e.stop()}}),e)})));return function(t,n,r,c,o){return e.apply(this,arguments)}}(),this.getAvailableCommands=Object(g.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("./commands.txt").then((function(e){return e.status<300?e.text():""})).then((function(e){return e.split("\n")}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),this.getHistoryLength=function(){return t.commandHistory.length},this.getHistoryAtPos=function(e){var n=t.commandHistory.length-1-e;if(!(n<0))return t.commandHistory[n]}},y=function(){return new O},S=c.a.createContext(y()),k=n(99),E=n(21),C=n(96),L=n(97),N=n(93),z=n(170),I=function(e){var t=Object(r.useState)(),n=Object(s.a)(t,2),o=n[0],a=n[1],u=Object(r.useState)([]),l=Object(s.a)(u,2),d=l[0],f=l[1];return Object(r.useEffect)((function(){f(e.children.map((function(e,t){return c.a.cloneElement(e,Object(i.a)(Object(i.a)({},e.props),{},{style:Object(i.a)(Object(i.a)({},e.props.style),{},{zIndex:e.props.windowId===o?200:100+t}),onSelected:function(e){a(e)}}))})))}),[e.children,o]),Object(b.jsx)(b.Fragment,{children:d})},T=(n(117),function(e){if(e)try{var t=e.childNodes[e.childNodes.length-1],n=document.createRange(),r=window.getSelection();t&&(n.setStart(t,t.hasChildNodes()?t.childNodes.length:1),n.collapse(!0),r&&r.removeAllRanges(),r&&r.addRange(n))}catch(e){console.warn(e)}}),R=function(e){var t='<span class="prompt">'+'<span class="bold">'.concat(e.prompt,"</span>")+'<span class="white bold">:</span><span class="blue bold">~</span><span class="white bold">$</span>'+('<pre style="display: inline;">'.concat(" ","</pre>")+"</span>"),n=Object(r.useState)(),c=Object(s.a)(n,2),o=c[0],a=c[1],i=Object(r.useState)(-1),u=Object(s.a)(i,2),l=u[0],d=u[1],h=Object(r.useState)([]),p=Object(s.a)(h,2),v=p[0],j=p[1],w=Object(r.useRef)(null),x=Object(r.useContext)(S),O=f();Object(r.useEffect)((function(){(function(){var t=Object(g.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=a,!e.welcome){t.next=9;break}return t.t2="",t.next=5,x.execute(e.windowId,"welcome",O,!1);case 5:t.t3=t.sent,t.t1=t.t2.concat.call(t.t2,t.t3,"<br/>"),t.next=10;break;case 9:t.t1="";case 10:return t.t4=t.t1,(0,t.t0)(t.t4),t.t5=j,t.next=15,x.getAvailableCommands();case 15:t.t6=t.sent,(0,t.t5)(t.t6),null===(n=w.current)||void 0===n||n.focus(),T(w.current);case 19:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[o,x,e.welcome,e.windowId,O]);var y=function(){var n=Object(g.a)(m.a.mark((function n(r,c,o){var a,i,s;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=r.trim(),null===(a=w.current)||void 0===a||a.setAttribute("contentEditable","true"),n.t0=r,n.next="clear"===n.t0?5:7;break;case 5:return w.current.innerHTML=t,n.abrupt("break",12);case 7:return n.next=9,x.execute(e.windowId,r,O,!0,c);case 9:s=n.sent,document.execCommand("insertHTML",!1,"".concat(o?'<pre style="display: inline;">'.concat(r,"</pre>"):"",'<br/><div class="command-output">').concat(s,"</div><br/>").concat(t)),w&&w.current&&w.current.lastElementChild.scrollIntoView();case 12:null===(i=w.current)||void 0===i||i.setAttribute("contentEditable",String(!O)),d(-1),T(w.current);case 15:case"end":return n.stop()}}),n)})));return function(e,t,r){return n.apply(this,arguments)}}(),k=function(e){var n=l;if(e&&l<x.getHistoryLength()-1?n=l+1:!e&&l>=0&&(n=l-1),w.current&&w.current.children&&w.current.children.length>0){var r,c=x.getHistoryAtPos(n);w.current.children[(null===(r=w.current)||void 0===r?void 0:r.children.length)-1].innerHTML=t+(c||""),w&&w.current&&w.current.lastElementChild.scrollIntoView(),T(w.current)}d(n)},E=function(){var t=Object(g.a)(m.a.mark((function t(n){var r,c,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.currentTarget.innerText,t.t0=n.keyCode,t.next=8===t.t0||37===t.t0?4:13===t.t0?6:38===t.t0?12:40===t.t0?15:18;break;case 4:return r.trimEnd().endsWith("".concat(e.prompt,":~$"))&&n.preventDefault(),t.abrupt("break",18);case 6:return c=L(r),o=C(c),n.preventDefault(),t.next=11,y(o.command,o.args);case 11:return t.abrupt("break",18);case 12:return k(!0),n.preventDefault(),t.abrupt("break",18);case 15:return k(!1),n.preventDefault(),t.abrupt("break",18);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),C=function(e){var t=e.split(" ");return t.length<=0?{command:"",args:[]}:{command:t[0],args:t.slice(1).map((function(e){return e.trim()}))}},L=function(t){return t.substring(t.lastIndexOf("".concat(e.prompt,":~$"))+"".concat(e.prompt,":~$").length).trim()};return Object(b.jsxs)("div",{className:"terminal",children:[Object(b.jsx)("div",{ref:w,spellCheck:"false",className:"terminal-input",contentEditable:!O,onKeyDown:E,onFocus:function(){T(w.current)},dangerouslySetInnerHTML:{__html:"".concat(o).concat(t)}}),Object(b.jsx)("div",{className:"commands",children:v.map((function(e){return Object(b.jsx)("button",{onClick:function(){return y(e,[],!0)},children:e},e)}))})]})},A=n(100),H=(n(118),n(119),n(54)),M=function(e){var t=Object(r.useRef)(null),n=Object(r.useState)(!1),c=Object(s.a)(n,2),o=c[0],a=c[1],u=Object(r.useState)({x:0,y:0}),l=Object(s.a)(u,2),d=l[0],f=l[1],h=Object(r.useState)(e.pos||{x:0,y:0}),p=Object(s.a)(h,2),v=p[0],m=p[1],g=Object(r.useState)({width:e.width||0,height:e.height||0}),j=Object(s.a)(g,2),w=j[0],x=j[1],O=Object(r.useState)(!1),y=Object(s.a)(O,2),S=y[0],k=y[1],E=function(){e.onSelected&&e.onSelected(e.windowId)},C=function(e){a(!1)},L=function(e){S||o&&m({x:e.pageX-d.x,y:e.pageY-d.y})},N=function(e){o&&e.changedTouches.length>0&&m({x:e.changedTouches[0].pageX-d.x,y:e.changedTouches[0].pageY-d.y})};Object(r.useEffect)((function(){document.addEventListener("mousemove",L),document.addEventListener("touchmove",N);var e=function(){document.removeEventListener("mouseup",C),document.removeEventListener("touchend",C)};return o?(document.addEventListener("mouseup",C),document.addEventListener("touchend",C)):e(),function(){e(),document.removeEventListener("mousemove",L),document.removeEventListener("touchmove",N)}})),Object(r.useEffect)((function(){e.onSelected&&e.onSelected(e.windowId)}),[]);return Object(b.jsx)("div",{ref:t,className:"window",style:Object(i.a)(Object(i.a)({},e.style),{},{left:v.x+"px",top:v.y+"px"}),onMouseDown:E,onTouchStart:E,children:Object(b.jsx)(A.a,{className:"resizable",size:{width:w.width,height:w.height},onResizeStart:function(){k(!0)},onResize:function(e,t,n,r){var c=NaN,o=NaN;e instanceof MouseEvent&&(c=e.clientX,o=e.clientY),e.touches&&e.touches.length>0&&(c=e.touches[0].clientX,o=e.touches[0].clientY),"left"!==t&&"bottomLeft"!==t||m({x:c,y:v.y}),"top"!==t&&"topRight"!==t||m({x:v.x,y:o}),"topLeft"===t&&m({x:c,y:o});var a=window.getSelection();a&&a.removeAllRanges()},onResizeStop:function(e,t,n,r){x({width:w.width+r.width,height:w.height+r.height}),k(!1)},children:Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)("div",{className:"titlebar noselect",onMouseDown:function(e){if(!S&&0===e.button){var n=function(e){var n,r,c=(null===(n=t.current)||void 0===n?void 0:n.offsetLeft)||0,o=(null===(r=t.current)||void 0===r?void 0:r.offsetTop)||0;return{x:e.pageX-c,y:e.pageY-o}}(e);a(!0),f(n)}},onTouchStart:function(n){if(!S){var r=function(e){var n,r,c=(null===(n=t.current)||void 0===n?void 0:n.offsetLeft)||0,o=(null===(r=t.current)||void 0===r?void 0:r.offsetTop)||0;return e.changedTouches.length>0?{x:e.changedTouches[0].pageX-c,y:e.changedTouches[0].pageY-o}:{x:0,y:0}}(n);a(!0),f(r),e.onSelected&&e.onSelected(e.windowId)}},children:e.title}),Object(b.jsx)(H.a,{className:"content",style:{overflow:S?"hidden":"auto"},children:e.children})]})})})},W=function(e){return Object(b.jsx)("div",{className:"window",style:e.style,children:Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)("div",{className:"titlebar noselect",children:e.title}),Object(b.jsx)(H.a,{className:"content",children:e.children})]})})};n(163);E.b.add(C.a,L.a);var D=function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],o=Object(r.useContext)(S),a=function(){var e=z.a(),t=Object(b.jsx)(R,{welcome:0===n.length,windowId:e,prompt:"guest@tc"}),r=p?Object(b.jsx)(W,{windowId:e,title:"guest@tc:~",style:{width:"90%",height:"90%"},children:t},e):Object(b.jsx)(M,{windowId:e,width:m,height:g,pos:{x:u/2-m/2,y:l/2-g/2},title:"guest@tc:~",children:t},e);o.registerExit(e,(function(e){c((function(t){return t.filter((function(t){return t.props.windowId!==e}))})),o.unregisterExit(e)})),c([].concat(Object(k.a)(n),[r]))},i=Object(r.useCallback)(a,[o]);Object(r.useEffect)((function(){i()}),[i]),Object(r.useEffect)((function(){var e=new URL(window.location.href).searchParams.get("login");e&&o.execute("","login",!1,!1,[e])}),[o]);var u=d(),l=h(),p=f(),v=u<=1024?.95:.6,m=v*u,g=v*l;return Object(b.jsxs)(b.Fragment,{children:[!p&&Object(b.jsxs)("button",{className:"newTerminal",onClick:a,children:[Object(b.jsx)(N.a,{icon:["fas","terminal"],size:"2x"}),"Terminal"]}),Object(b.jsx)(I,{children:n})]})};var P=function(){var e=Object(r.useRef)(null),t=Object(r.useState)(Object(u.a)()),n=Object(s.a)(t,1)[0],c={backgroundColor:getComputedStyle(document.documentElement).getPropertyValue("--main-bg-color"),textColor:getComputedStyle(document.documentElement).getPropertyValue("--main-fg-color"),fontSize:10};return Object(b.jsx)(S.Provider,{value:y(),children:Object(b.jsxs)(l.b,{history:n,children:[Object(b.jsx)(p,Object(i.a)({},c)),Object(b.jsx)("div",{ref:e,className:"App",children:Object(b.jsx)(l.c,{children:Object(b.jsx)(l.a,{path:"/",children:Object(b.jsx)(D,{})})})})]})})},U=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Y(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(P,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");U?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Y(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Y(t,e)}))}}()}},[[166,1,2]]]);
//# sourceMappingURL=main.16d594c1.chunk.js.map