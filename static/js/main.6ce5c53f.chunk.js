(this.webpackJsonpcv=this.webpackJsonpcv||[]).push([[0],{100:function(e,t,n){e.exports=n(168)},105:function(e,t,n){},106:function(e,t,n){},107:function(e,t,n){},108:function(e,t,n){},109:function(e,t,n){},116:function(e,t,n){},119:function(e,t,n){},165:function(e,t,n){},168:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(89),o=n.n(c),i=(n(105),n(106),n(107),n(2)),u=n(12),s=n(171);n(108);function l(){var e=Object(r.useState)(window.innerWidth),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){var e=function(){return a(window.innerWidth)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}})),n}function d(){return l()<600}function f(){var e=Object(r.useState)(window.innerHeight),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){var e=function(){return a(window.innerHeight)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}})),n}n(109);var h=function(e){var t=Object(r.useRef)(null),n=l(),c=f(),o=Object(r.useState)({matrix:[],drops:[]}),u=Object(i.a)(o,2),s=u[0],d=u[1];return Object(r.useEffect)((function(){var n=t&&t.current;if(n){var r=function(e,t){var n=e.getContext("2d");if(null==n)return{matrix:[],drops:[]};var r="\u30ac\u30ce\u30f3\u306e\u5f62\u614b\u306b\u3088\u3063\u3066\u30b9\u30c6\u30c3\u30d7\u3092\u5206\u3051\u305f\u65b9\u304c\u3044\u3044\u304b\u3082".split(""),a=e.width/t.fontSize,c=e.height/t.fontSize,o=[];n.fillStyle="rgba(".concat(t.textColor,", 0.04)"),n.font=t.fontSize+"px arial";for(var i=0;i<a;i++){o[i]=c;for(var u=0;u<c;u++){var s=r[Math.floor(Math.random()*r.length)];n.fillText(s,i*t.fontSize,u*t.fontSize)}}return{matrix:r,drops:o}}(n,e);d(r)}}),[e]),function(e,t){var n=Object(r.useRef)(e);Object(r.useEffect)((function(){n.current=e}),[e]),Object(r.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){var n=t&&t.current;if(n){var r=function(e,t,n){var r=e.getContext("2d");if(null==r)return{matrix:[],drops:[]};r.fillStyle="rgba(".concat(t.backgroundColor,", 0.04)"),r.fillRect(0,0,e.width,e.height),r.fillStyle="rgba(".concat(t.textColor,", 1)"),r.font=t.fontSize+"px arial";for(var a=0;a<n.drops.length;a++){var c=n.matrix[Math.floor(Math.random()*n.matrix.length)];r.fillText(c,a*t.fontSize,n.drops[a]*t.fontSize),n.drops[a]*t.fontSize>e.height&&Math.random()>.975&&(n.drops[a]=0),n.drops[a]++}return n}(n,e,s);d(r)}}),35),a.a.createElement("canvas",{ref:t,id:"matrix",width:n,height:c})},m=n(3),p=n.n(m),v=n(14),b=n(90),g=n(34),w=function(e,t){try{return g.a.decrypt(e,t).toString(g.b.Utf8)}catch(n){return""}},x=function e(){var t=this;Object(b.a)(this,e),this.exitCallbacks={},this.commandHistory=[],this.encrypted=["experience","skills","profile","picture","languages"],this.fetchAndDecrypt=function(){var e=Object(v.a)(p.a.mark((function e(n,r,a){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetch(n,r);case 2:if(!(c=e.sent).startsWith("encrypted:")){e.next=5;break}return e.abrupt("return",w(c.replace("encrypted:",""),a)||"Unauthorized");case 5:return e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),this.fetch=function(e,t){var n="./c_".concat(e,t?"_small.html":".html");return fetch(n).then((function(t){return t.status<300?t.text():"".concat(e,": command not found<br/>")}))},this.handleLogin=function(){var e=Object(v.a)(p.a.mark((function e(n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n&&n.length>0)){e.next=8;break}return e.next=3,t.fetchAndDecrypt("check",!1,n[0]);case 3:if("OK"!==e.sent){e.next=7;break}return sessionStorage.setItem("aesKey",btoa(n[0])),e.abrupt("return","Login successful");case 7:return e.abrupt("return","Unauthorized");case 8:return e.abrupt("return","Usage: login [decrytionKey]");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.handleLogout=function(e){return sessionStorage.removeItem("aesKey"),"You are now logged out"},this.handleExit=function(e){var n=t.exitCallbacks[e];return n&&n(e),"session closed"},this.registerExit=function(e,n){t.exitCallbacks[e]=n},this.unregisterExit=function(e){delete t.exitCallbacks[e]},this.execute=function(){var e=Object(v.a)(p.a.mark((function e(n,r,a,c,o){var i,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=atob(sessionStorage.getItem("aesKey")||""),u=""!==r.trim(),c&&u&&t.commandHistory.push(r),e.t0=!0,e.next=e.t0===("login"===r)?6:e.t0===("logout"===r)?7:e.t0===("exit"===r)?8:9;break;case 6:return e.abrupt("return",t.handleLogin(o));case 7:return e.abrupt("return",t.handleLogout(o));case 8:return e.abrupt("return",a?Promise.resolve(""):t.handleExit(n));case 9:return e.abrupt("return",t.fetchAndDecrypt(r,a,i));case 10:case"end":return e.stop()}}),e)})));return function(t,n,r,a,c){return e.apply(this,arguments)}}(),this.getAvailableCommands=Object(v.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("./commands.txt").then((function(e){return e.status<300?e.text():""})).then((function(e){return e.split("\n")}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),this.getHistoryLength=function(){return t.commandHistory.length},this.getHistoryAtPos=function(e){var n=t.commandHistory.length-1-e;if(!(n<0))return t.commandHistory[n]}},y=function(){return new x},E=a.a.createContext(y()),O=n(99),j=n(26),S=n(95),k=n(96),C=n(91),L=n(172),z=n(27),N=function(e){var t=Object(r.useState)(),n=Object(i.a)(t,2),c=n[0],o=n[1],u=Object(r.useState)([]),s=Object(i.a)(u,2),l=s[0],d=s[1];return Object(r.useEffect)((function(){d(e.children.map((function(e,t){return a.a.cloneElement(e,Object(z.a)({},e.props,{style:Object(z.a)({},e.props.style,{zIndex:e.props.windowId===c?200:100+t}),onSelected:function(e){o(e)}}))})))}),[e.children,c]),a.a.createElement(a.a.Fragment,null,l)},I=(n(116),function(e){if(e)try{var t=e.childNodes[e.childNodes.length-1],n=document.createRange(),r=window.getSelection();t&&(n.setStart(t,t.hasChildNodes()?t.childNodes.length:1),n.collapse(!0),r&&r.removeAllRanges(),r&&r.addRange(n))}catch(e){console.warn(e)}}),T=function(e){var t='<span class="prompt">'+'<span class="bold">'.concat(e.prompt,"</span>")+'<span class="white bold">:</span><span class="blue bold">~</span><span class="white bold">$</span>'+'<pre style="display: inline;">'.concat(" ","</pre>")+"</span>",n=Object(r.useState)(),c=Object(i.a)(n,2),o=c[0],u=c[1],s=Object(r.useState)(-1),l=Object(i.a)(s,2),f=l[0],h=l[1],m=Object(r.useState)([]),b=Object(i.a)(m,2),g=b[0],w=b[1],x=Object(r.useRef)(null),y=Object(r.useContext)(E),O=d();Object(r.useEffect)((function(){(function(){var t=Object(v.a)(p.a.mark((function t(){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=u,!e.welcome){t.next=9;break}return t.t2="",t.next=5,y.execute(e.windowId,"welcome",O,!1);case 5:t.t3=t.sent,t.t1=t.t2.concat.call(t.t2,t.t3,"<br/>"),t.next=10;break;case 9:t.t1="";case 10:return t.t4=t.t1,(0,t.t0)(t.t4),t.t5=w,t.next=15,y.getAvailableCommands();case 15:t.t6=t.sent,(0,t.t5)(t.t6),null===(n=x.current)||void 0===n||n.focus(),I(x.current);case 19:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[o,y,e.welcome,e.windowId,O]);var j=function(){var n=Object(v.a)(p.a.mark((function n(r,a,c){var o,i,u;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=r.trim(),null===(o=x.current)||void 0===o||o.setAttribute("contentEditable","true"),n.t0=r,n.next="clear"===n.t0?5:7;break;case 5:return x.current.innerHTML=t,n.abrupt("break",12);case 7:return n.next=9,y.execute(e.windowId,r,O,!0,a);case 9:u=n.sent,document.execCommand("insertHTML",!1,"".concat(c?'<pre style="display: inline;">'.concat(r,"</pre>"):"",'<br/><div class="command-output">').concat(u,"</div><br/>").concat(t)),x&&x.current&&x.current.lastElementChild.scrollIntoView();case 12:null===(i=x.current)||void 0===i||i.setAttribute("contentEditable",String(!O)),h(-1),I(x.current);case 15:case"end":return n.stop()}}),n)})));return function(e,t,r){return n.apply(this,arguments)}}(),S=function(e){var n=f;if(e&&f<y.getHistoryLength()-1?n=f+1:!e&&f>=0&&(n=f-1),x.current&&x.current.children&&x.current.children.length>0){var r,a=y.getHistoryAtPos(n);x.current.children[(null===(r=x.current)||void 0===r?void 0:r.children).length-1].innerHTML=t+(a||""),x&&x.current&&x.current.lastElementChild.scrollIntoView(),I(x.current)}h(n)},k=function(){var t=Object(v.a)(p.a.mark((function t(n){var r,a,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.currentTarget.innerText,t.t0=n.keyCode,t.next=8===t.t0||37===t.t0?4:13===t.t0?6:38===t.t0?12:40===t.t0?15:18;break;case 4:return r.trimEnd().endsWith("".concat(e.prompt,":~$"))&&n.preventDefault(),t.abrupt("break",18);case 6:return a=L(r),c=C(a),n.preventDefault(),t.next=11,j(c.command,c.args);case 11:return t.abrupt("break",18);case 12:return S(!0),n.preventDefault(),t.abrupt("break",18);case 15:return S(!1),n.preventDefault(),t.abrupt("break",18);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),C=function(e){var t=e.split(" ");return t.length<=0?{command:"",args:[]}:{command:t[0],args:t.slice(1).map((function(e){return e.trim()}))}},L=function(t){return t.substring(t.lastIndexOf("".concat(e.prompt,":~$"))+"".concat(e.prompt,":~$").length).trim()};return a.a.createElement("div",{className:"terminal"},a.a.createElement("div",{ref:x,spellCheck:"false",className:"terminal-input",contentEditable:!O,onKeyDown:k,onFocus:function(){I(x.current)},dangerouslySetInnerHTML:{__html:"".concat(o).concat(t)}}),a.a.createElement("div",{className:"commands"},g.map((function(e){return a.a.createElement("button",{key:e,onClick:function(){return j(e,[],!0)}},e)}))))},R=n(92),A=(n(119),n(120),n(53)),H=function(e){var t=Object(r.useRef)(null),n=Object(r.useState)(!1),c=Object(i.a)(n,2),o=c[0],u=c[1],s=Object(r.useState)({x:0,y:0}),l=Object(i.a)(s,2),d=l[0],f=l[1],h=Object(r.useState)(e.pos||{x:0,y:0}),m=Object(i.a)(h,2),p=m[0],v=m[1],b=Object(r.useState)({width:e.width||0,height:e.height||0}),g=Object(i.a)(b,2),w=g[0],x=g[1],y=Object(r.useState)(!1),E=Object(i.a)(y,2),O=E[0],j=E[1],S=function(){e.onSelected&&e.onSelected(e.windowId)},k=function(e){u(!1)},C=function(e){O||o&&v({x:e.pageX-d.x,y:e.pageY-d.y})},L=function(e){o&&e.changedTouches.length>0&&v({x:e.changedTouches[0].pageX-d.x,y:e.changedTouches[0].pageY-d.y})};Object(r.useEffect)((function(){document.addEventListener("mousemove",C),document.addEventListener("touchmove",L);var e=function(){document.removeEventListener("mouseup",k),document.removeEventListener("touchend",k)};return o?(document.addEventListener("mouseup",k),document.addEventListener("touchend",k)):e(),function(){e(),document.removeEventListener("mousemove",C),document.removeEventListener("touchmove",L)}})),Object(r.useEffect)((function(){e.onSelected&&e.onSelected(e.windowId)}),[]);return a.a.createElement("div",{ref:t,className:"window",style:Object(z.a)({},e.style,{left:p.x+"px",top:p.y+"px"}),onMouseDown:S,onTouchStart:S},a.a.createElement(R.Resizable,{className:"resizable",size:{width:w.width,height:w.height},onResizeStart:function(){j(!0)},onResize:function(e,t,n,r){var a=NaN,c=NaN;e instanceof MouseEvent&&(a=e.clientX,c=e.clientY),e.touches&&e.touches.length>0&&(a=e.touches[0].clientX,c=e.touches[0].clientY),"left"!==t&&"bottomLeft"!==t||v({x:a,y:p.y}),"top"!==t&&"topRight"!==t||v({x:p.x,y:c}),"topLeft"===t&&v({x:a,y:c});var o=window.getSelection();o&&o.removeAllRanges()},onResizeStop:function(e,t,n,r){x({width:w.width+r.width,height:w.height+r.height}),j(!1)}},a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"titlebar noselect",onMouseDown:function(e){if(!O&&0===e.button){var n=function(e){var n,r,a=(null===(n=t.current)||void 0===n?void 0:n.offsetLeft)||0,c=(null===(r=t.current)||void 0===r?void 0:r.offsetTop)||0;return{x:e.pageX-a,y:e.pageY-c}}(e);u(!0),f(n)}},onTouchStart:function(n){if(!O){var r=function(e){var n,r,a=(null===(n=t.current)||void 0===n?void 0:n.offsetLeft)||0,c=(null===(r=t.current)||void 0===r?void 0:r.offsetTop)||0;return e.changedTouches.length>0?{x:e.changedTouches[0].pageX-a,y:e.changedTouches[0].pageY-c}:{x:0,y:0}}(n);u(!0),f(r),e.onSelected&&e.onSelected(e.windowId)}}},e.title),a.a.createElement(A.a,{className:"content",style:{overflow:O?"hidden":"auto"}},e.children))))},M=function(e){return a.a.createElement("div",{className:"window",style:e.style},a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"titlebar noselect"},e.title),a.a.createElement(A.a,{className:"content"},e.children)))};n(165);j.b.add(S.a,k.a);var W=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],o=Object(r.useContext)(E),u=function(){var e=L.a(),t=a.a.createElement(T,{welcome:0===n.length,windowId:e,prompt:"guest@tc"}),r=p?a.a.createElement(M,{key:e,windowId:e,title:"guest@tc:~",style:{width:"90%",height:"90%"}},t):a.a.createElement(H,{key:e,windowId:e,width:b,height:g,pos:{x:h/2-b/2,y:m/2-g/2},title:"guest@tc:~"},t);o.registerExit(e,(function(e){c((function(t){return t.filter((function(t){return t.props.windowId!==e}))})),o.unregisterExit(e)})),c([].concat(Object(O.a)(n),[r]))},s=Object(r.useCallback)(u,[o]);Object(r.useEffect)((function(){s()}),[s]),Object(r.useEffect)((function(){var e=new URL(window.location.href).searchParams.get("login");e&&o.execute("","login",!1,!1,[e])}),[o]);var h=l(),m=f(),p=d(),v=h<=1024?.95:.6,b=v*h,g=v*m;return a.a.createElement(a.a.Fragment,null,!p&&a.a.createElement("button",{className:"newTerminal",onClick:u},a.a.createElement(C.a,{icon:["fas","terminal"],size:"2x"}),"Terminal"),a.a.createElement(N,null,n))};var D=function(){var e=Object(r.useRef)(null),t=Object(r.useState)(Object(u.a)()),n=Object(i.a)(t,1)[0],c={backgroundColor:getComputedStyle(document.documentElement).getPropertyValue("--main-bg-color"),textColor:getComputedStyle(document.documentElement).getPropertyValue("--main-fg-color"),fontSize:10};return a.a.createElement(E.Provider,{value:y()},a.a.createElement(s.b,{history:n},a.a.createElement(h,c),a.a.createElement("div",{ref:e,className:"App"},a.a.createElement(s.c,null,a.a.createElement(s.a,{path:"/"},a.a.createElement(W,null))))))},P=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function U(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(D,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");P?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):U(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):U(t,e)}))}}()}},[[100,1,2]]]);
//# sourceMappingURL=main.6ce5c53f.chunk.js.map